<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
<f:view>

   <h:head>
      <!-- BOOTSTRAP -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
      <!-- CSS ADMIN -->
      <link rel="stylesheet" href="css/styles2.css"/>
      <!-- BOX ICONS CSS-->
      <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'/>
      <title>Vendedor</title>

   </h:head>

   <h:body>

   <div class="container">


   <div class="clientes">
      <h:link rendered="#{!loginBean.esAdministrador()}"
              style="margin: 15px 15px 0 0; float: right;"
              type="button"
              class="btn btn-outline-success"
              outcome="form">
         Añadir cliente <i class="fa-solid fa-plus"></i>
      </h:link>

      <!-- Formulario de búsqueda -->
    <h:form styleClass="caja-busqueda" id="searchForm1">
         <div class="input-group d-flex w-25">
            <h:outputLabel for="buscarID">
               <span class="input-group-text" id="addon-wrapping">  <i class='bx bx-search-alt bx-sm' style="color:#007aff "></i></span>
            </h:outputLabel>
            <h:inputText id="buscarID" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="addon-wrapping" value="#{userBean.searchID}">
               <f:ajax event="keyup" render="clientesTable" listener="#{userBean.filterUsers}"/>
            </h:inputText>
         </div>
      </h:form>

      <h:form id="clientesTable">
         <table class="table table-striped">
            <thead>
            <tr>
               <th />
               <th scope="col">Código</th>
               <th scope="col">Nombre</th>
               <th scope="col">Correo</th>
               <th scope="col">Teléfono</th>
               <th scope="col">Contacto de emergencia</th>
               <th scope="col">Creador</th>
            </tr>
            </thead>
            <tbody>
            <c:forEach items="#{userBean.filteredUsers}" var="user">
               <tr>
                  <td>
                     <h:commandLink action="#{userBean.userDetail(user.cedula)}" class="btn btn-outline-primary">
                        <h:panelGroup>
                           <i class='bx bx-show bx-sm'></i>
                        </h:panelGroup>
                     </h:commandLink>
                     <h:commandLink style="margin-top: 5px;" action="#{userBean.deleteUser(user.cedula)}" class="btn btn-outline-danger">
                        <f:ajax render="@form" />
                        <h:panelGroup>
                           <i class='bx bx-user-minus bx-sm'></i>
                        </h:panelGroup>
                     </h:commandLink>
                  </td>
                  <td>${user.cedula}</td>
                  <td>${user.nombre}</td>
                  <td>${user.correo}</td>
                  <td>${user.telefono1}</td>
                  <td>${user.contactoEmergencia}</td>
                  <td>${user.creador}</td>
               </tr>
            </c:forEach>
            </tbody>
         </table>
      </h:form>
   </div>
   </div>
   </h:body>
</f:view>

</html>
